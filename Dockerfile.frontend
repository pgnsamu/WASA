
FROM node:lts AS builder
WORKDIR /app

# Copy only package.json and yarn.lock first for better caching
COPY webui/package.json webui/yarn.lock ./webui/

WORKDIR /app/webui

# Copy the rest of your code
COPY webui .

# Run your production build
RUN yarn run build-prod

FROM nginx:stable
COPY --from=builder /app/webui/dist /usr/share/nginx/html
